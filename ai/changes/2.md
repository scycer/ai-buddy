# Notes App Project Plan

## Steps Completed
1. Created a new Convex schema for notes:
```typescript
export const notes = defineCollection({
    schema: z.object({
        content: z.string(),
        dateAdded: z.date(),
        dateUpdated: z.date(),
        isDeleted: z.boolean(),
        userId: z.string(),
    }),
});
```

2. Created a new Convex mutation for adding a note:
```typescript
export const addNote = defineMutation({
    args: z.object({
        content: z.string(),
        userId: z.string(),
    }),
    resolver: async ({ args }) => {
        const { content, userId } = args;
        const note = {
            content,
            dateAdded: new Date(),
            dateUpdated: new Date(),
            isDeleted: false,
            userId,
        };
        return note;
    },
});
```

3. Create a new react page to render a list of notes
```typescript
export default function Notes() {
    const notes = useQuery({
        query: notesQuery,
    });
    return (
        <div>
            <h1>Notes</h1>
            <ul>
                {notes.map((note) => (
                    <li key={note.id}>{note.content}</li>
                ))}
            </ul>
        </div>
    );
}
```

4. Create a homepage with a link to the notes page
```typescript
export default function Home() {
    return (
        <div>
            <h1>Notes App</h1>
            <Link href="/notes">Go to Notes</Link>
        </div>
    );
}
```
5. Add a create note page, that also acts the same edit form. New or editing a note should update the notes list in real time.
```typescript
export default function CreateNote() {
    return (
        <div>
            <h1>Create Note</h1>
            <form onSubmit={handleSubmit}>
                <input type="text" value={note.content} onChange={(e) => setNote({ ...note, content: e.target.value })} />
                <button type="submit">Create</button>
            </form>
        </div>
    );
}
```

## Remaining Steps

6. Implement the Delete Note Mutation
   - Create a mutation that marks notes as deleted (isDeleted: true) rather than removing them from the database
   - Update the note's dateUpdated field when it's marked as deleted
   - Add error handling for cases where the note doesn't exist

7. Complete the CreateNote Component
   - Add state management for the note content
   - Implement form submission logic
   - Make it dual-purpose to handle both creating and editing notes
   - Add navigation to return to the notes list after submission

8. Create Update Note Mutation
   - Create a mutation to update existing notes' content
   - Include validation to prevent updating deleted notes
   - Update the dateUpdated timestamp on changes

9. Improve Notes Query
   - Filter out deleted notes from query results
   - Add ability to filter by userId for multi-user support
   - Sort notes by dateUpdated (newest first)

10. Create Get Note by ID Query
    - Implement a query to fetch a single note by its ID
    - Return null for deleted notes or non-existent IDs

11. Enhance Notes List Component
    - Add edit and delete buttons for each note
    - Display the last updated timestamp
    - Add confirmation before deletion
    - Include a button to create new notes

12. Setup Routing Configuration
    - Configure routes for home, notes list, create note, and edit note
    - Implement a layout component with consistent navigation

13. Add Styling
    - Create basic CSS for the application
    - Style the notes list, forms, and buttons
    - Make the UI responsive for different screen sizes

14. Final Steps and Future Enhancements
    - Authentication (if needed)
    - Error handling improvements
    - Deployment (Convex backend, frontend to Vercel/Netlify)
    - Testing
    - Advanced features (search, categories, rich text, sharing)
