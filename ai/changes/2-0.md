# Notes App Implementation Guide with Convex

## Phase 1: Project Setup and Basic Schema

1. **Initialize Project**
   - Create a new project directory
   - Initialize a React project with Vite or Create React App
   - Install Convex SDK and necessary dependencies
   - Test: Verify project builds successfully

2. **Set Up Convex**
   - Initialize Convex with `npx convex init`
   - Configure dev environment
   - Test: Run Convex dev server successfully

3. **Define Note Schema**
   - Create schema file with `defineCollection` and Zod validation
   - Define fields: content, dateCreated, dateUpdated, isDeleted, userId
   - Add appropriate indexes for userId and dateUpdated
   - Test: Validate schema through Convex Dashboard

## Phase 2: Backend Query Functions

4. **Implement List Notes Query**
   - Create basic query to list all notes (without filters initially)
   - Add sorting by dateUpdated
   - Test: Verify query returns empty array with no errors

5. **Add Filtering to List Query**
   - Extend query to filter out deleted notes
   - Add user-specific filtering
   - Test: Manually insert test data and verify filters work

6. **Create Get Note by ID Query**
   - Implement function to fetch a single note by ID
   - Add validation to check if note exists and isn't deleted
   - Test: Verify retrieval of existing notes and handling of missing notes

## Phase 3: Backend Mutation Functions

7. **Implement Add Note Mutation**
   - Create mutation function to insert a new note
   - Set timestamps and required fields
   - Return new document ID
   - Test: Create a note and verify it appears in database

8. **Create Update Note Mutation**
   - Implement function to update note content
   - Update the dateUpdated field
   - Add validation checks
   - Test: Update a note and verify changes persist

9. **Add Delete Note Mutation**
   - Implement soft delete functionality (setting isDeleted flag)
   - Add validation to ensure note exists before deletion
   - Test: Delete a note and verify it no longer appears in queries

## Phase 4: Authentication Setup

10. **Configure Authentication**
    - Set up Convex Auth (choose a provider like Google, GitHub, etc.)
    - Configure auth in both frontend and backend
    - Test: Verify login flow works correctly

11. **Implement Authorization in Queries/Mutations**
    - Modify queries to filter by authenticated user
    - Add authorization checks to mutations
    - Test: Verify users can only access their own notes

## Phase 5: Basic Frontend

12. **Create App Layout**
    - Implement basic layout component
    - Add navigation structure
    - Set up React Router
    - Test: Verify navigation between pages works

13. **Implement Notes List UI**
    - Create component to display list of notes
    - Connect to List Notes query with useQuery hook
    - Add loading state
    - Test: Verify notes display correctly when loaded

14. **Build Create Note Form**
    - Create form component for adding new notes
    - Connect to Add Note mutation with useMutation hook
    - Add form validation
    - Test: Create a note and verify it appears in the list

## Phase 6: Enhanced Frontend Features

15. **Implement Edit Note Functionality**
    - Create or extend form for editing notes
    - Connect to Update Note mutation
    - Add validation and error handling
    - Test: Edit a note and verify changes display in list

16. **Add Delete Button**
    - Implement delete button for each note
    - Connect to Delete Note mutation
    - Add confirmation dialog
    - Test: Delete a note and verify it disappears from list

17. **Improve UX with Loading States**
    - Add loading indicators for mutations
    - Implement error handling for failed operations
    - Test: Verify loading states appear during operations